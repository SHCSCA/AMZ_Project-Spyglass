{"openapi":"3.0.1","info":{"title":"Spyglass API","description":"Spyglass 后端 API：ASIN 监控与抓取接口（自动生成的 OpenAPI）","version":"0.0.1"},"servers":[{"url":"http://localhost:8081","description":"Generated server url"}],"tags":[{"name":"ReviewQuery","description":"差评 / 评论查询接口 (F-API-006)"},{"name":"AsinAlertQuery","description":"指定 ASIN 告警查询接口 (F-API-005 补充)"},{"name":"Asin Keywords","description":"管理 ASIN 监控的关键词"},{"name":"AlertQuery","description":"警报日志查询接口 (F-API-005)"},{"name":"ASIN 数据查询","description":"提供查询指定 ASIN 历史抓取数据的功能"},{"name":"ASIN 管理","description":"提供对监控的 ASIN 列表进行增、删、改、查的核心接口"},{"name":"Asin Costs & Profit","description":"管理 ASIN 成本配置并计算利润"},{"name":"ASIN 分组管理","description":"管理 ASIN 分组（创建、查询、查看分组下 ASIN 列表）"}],"paths":{"/api/v1/asins/{asin}/keywords/{keywordId}":{"put":{"tags":["Asin Keywords"],"summary":"更新一个关键词","description":"更新指定ID的关键词信息，例如关键词文本或是否追踪。","operationId":"updateKeyword","parameters":[{"name":"asin","in":"path","description":"亚马逊标准识别码","required":true,"schema":{"type":"string"},"example":"B08N5WRWNW"},{"name":"keywordId","in":"path","description":"关键词记录的唯一ID","required":true,"schema":{"type":"integer","format":"int64"},"example":101}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinKeywordDto"}}},"required":true},"responses":{"200":{"description":"关键词更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinKeywordDto"}}}},"400":{"description":"请求体无效或缺少必填项","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinKeywordDto"}}}},"404":{"description":"未找到指定的关键词记录","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinKeywordDto"}}}}}},"delete":{"tags":["Asin Keywords"],"summary":"删除一个关键词","description":"删除指定ID的关键词。","operationId":"deleteKeyword","parameters":[{"name":"asin","in":"path","description":"亚马逊标准识别码","required":true,"schema":{"type":"string"},"example":"B08N5WRWNW"},{"name":"keywordId","in":"path","description":"关键词记录的唯一ID","required":true,"schema":{"type":"integer","format":"int64"},"example":101}],"responses":{"204":{"description":"删除成功"},"404":{"description":"未找到要删除的关键词"}}}},"/api/asin/{id}/config":{"put":{"tags":["ASIN 管理"],"summary":"更新指定 ASIN 的配置","description":"允许更新一个已存在 ASIN 的昵称、库存阈值等配置信息。","operationId":"updateConfig","parameters":[{"name":"id","in":"path","description":"要更新的 ASIN 的唯一 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinRequest"}}},"required":true},"responses":{"200":{"description":"更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinResponse"}}}},"404":{"description":"未找到指定 ID 的 ASIN","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinResponse"}}}}}}},"/api/v1/asins/{asin}/keywords":{"get":{"tags":["Asin Keywords"],"summary":"获取ASIN的所有关键词","description":"检索指定ASIN的所有监控关键词，若未配置关键词则返回空数组。","operationId":"getKeywords","parameters":[{"name":"asin","in":"path","description":"亚马逊标准识别码","required":true,"schema":{"type":"string"},"example":"B08N5WRWNW"}],"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AsinKeywordDto"}}}}},"404":{"description":"指定的 ASIN 不存在","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AsinKeywordDto"}}}}}}},"post":{"tags":["Asin Keywords"],"summary":"为ASIN添加一个关键词","description":"为指定的ASIN添加一个新的监控关键词。","operationId":"addKeyword","parameters":[{"name":"asin","in":"path","description":"亚马逊标准识别码","required":true,"schema":{"type":"string"},"example":"B08N5WRWNW"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinKeywordDto"}}},"required":true},"responses":{"201":{"description":"关键词创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinKeywordDto"}}}},"400":{"description":"请求体无效或缺少必填项","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinKeywordDto"}}}},"404":{"description":"指定的 ASIN 不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinKeywordDto"}}}}}}},"/api/v1/asins/{asin}/keywords/{keywordId}/track-now":{"post":{"tags":["Asin Keywords"],"summary":"手动触发关键词排名抓取","description":"立即对指定关键词执行一次 Selenium 抓取，并返回自然排名/广告排名。","operationId":"trackKeywordNow","parameters":[{"name":"asin","in":"path","description":"亚马逊标准识别码","required":true,"schema":{"type":"string"},"example":"B08N5WRWNW"},{"name":"keywordId","in":"path","description":"关键词记录的唯一ID","required":true,"schema":{"type":"integer","format":"int64"},"example":101}],"responses":{"200":{"description":"抓取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KeywordRankResponse"}}}},"404":{"description":"ASIN 或关键词不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KeywordRankResponse"}}}},"500":{"description":"抓取失败，请稍后重试","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KeywordRankResponse"}}}}}}},"/api/v1/asins/{asin}/costs":{"get":{"tags":["Asin Costs & Profit"],"summary":"获取ASIN的成本配置","description":"检索指定ASIN的成本数据。","operationId":"getCosts","parameters":[{"name":"asin","in":"path","description":"亚马逊标准识别码","required":true,"schema":{"type":"string"},"example":"B08N5WRWNW"}],"responses":{"200":{"description":"成功检索到成本配置","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinCostsDto"}}}},"404":{"description":"未找到指定ASIN的成本配置","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinCostsDto"}}}}}},"post":{"tags":["Asin Costs & Profit"],"summary":"创建或更新ASIN的成本配置","description":"为指定的ASIN创建或更新成本数据。如果已存在，则覆盖。","operationId":"createOrUpdateCosts","parameters":[{"name":"asin","in":"path","description":"亚马逊标准识别码","required":true,"schema":{"type":"string"},"example":"B08N5WRWNW"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinCostsDto"}}},"required":true},"responses":{"200":{"description":"成本配置已成功保存","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinCostsDto"}}}},"400":{"description":"请求体无效","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinCostsDto"}}}},"404":{"description":"ASIN不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinCostsDto"}}}}}},"delete":{"tags":["Asin Costs & Profit"],"summary":"删除ASIN的成本配置","description":"删除指定ASIN的成本数据。","operationId":"deleteCosts","parameters":[{"name":"asin","in":"path","description":"亚马逊标准识别码","required":true,"schema":{"type":"string"},"example":"B08N5WRWNW"}],"responses":{"204":{"description":"成本配置已成功删除"},"404":{"description":"未找到要删除的成本配置"}}}},"/api/groups":{"get":{"tags":["ASIN 分组管理"],"summary":"分组列表","description":"分页获取全部分组","operationId":"list","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"maximum":200,"type":"integer","format":"int32","default":50}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PageResponseAsinGroupModel"}}}}}},"post":{"tags":["ASIN 分组管理"],"summary":"创建分组","description":"创建一个新的 ASIN 分组","operationId":"create","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinGroupModel"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinGroupModel"}}}}}}},"/api/asin":{"get":{"tags":["ASIN 管理"],"summary":"获取所有监控的 ASIN 列表 (分页)","description":"支持分页与按创建时间排序。","operationId":"list_1","parameters":[{"name":"page","in":"query","description":"页码 (从0开始)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"每页条数 (最大200)","required":false,"schema":{"maximum":200,"type":"integer","format":"int32","default":50},"example":50},{"name":"groupId","in":"query","description":"按分组ID过滤","required":false,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"成功获取列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AsinResponse"}}}}}}},"post":{"tags":["ASIN 管理"],"summary":"添加一个新的 ASIN 进行监控","description":"根据传入的 ASIN、站点等信息，创建一个新的监控任务。","operationId":"create_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinRequest"}}},"required":true},"responses":{"200":{"description":"ASIN 创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinResponse"}}}},"400":{"description":"请求参数无效（例如ASIN为空或格式错误）","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinResponse"}}}}}}},"/api/v1/asins/{asin}/keywords/{keywordId}/history":{"get":{"tags":["Asin Keywords"],"summary":"获取关键词排名历史","description":"获取指定关键词的历史排名数据。","operationId":"getKeywordHistory","parameters":[{"name":"asin","in":"path","description":"亚马逊标准识别码","required":true,"schema":{"type":"string"},"example":"B08N5WRWNW"},{"name":"keywordId","in":"path","description":"关键词记录的唯一ID","required":true,"schema":{"type":"integer","format":"int64"},"example":101}],"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/KeywordRankHistoryDto"}}}}},"404":{"description":"未找到指定的关键词记录","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/KeywordRankHistoryDto"}}}}}}}},"/api/v1/asins/{asin}/costs/calculate-profit":{"get":{"tags":["Asin Costs & Profit"],"summary":"计算ASIN的利润","description":"根据给定的售价和已配置的成本，计算产品的利润和利润率。","operationId":"calculateProfit","parameters":[{"name":"asin","in":"path","description":"亚马逊标准识别码","required":true,"schema":{"type":"string"},"example":"B08N5WRWNW"},{"name":"price","in":"query","description":"要计算的售价","required":true,"schema":{"type":"number"},"example":49.99}],"responses":{"200":{"description":"利润计算成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfitCalculationResponse"}}}},"400":{"description":"售价无效或成本未配置","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfitCalculationResponse"}}}}}}},"/api/groups/{id}":{"get":{"tags":["ASIN 分组管理"],"summary":"查询单个分组","description":"根据分组 ID 查询","operationId":"get","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinGroupModel"}}}}}}},"/api/groups/{id}/asins":{"get":{"tags":["ASIN 分组管理"],"summary":"查看分组下 ASIN 列表","description":"按分组分页列出 ASIN","operationId":"listAsins","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"maximum":200,"type":"integer","format":"int32","default":50}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PageResponseAsinResponse"}}}}}}},"/api/asin/{id}":{"get":{"tags":["ASIN 管理"],"summary":"获取单个 ASIN 的详情","description":"根据主键 ID 返回单个 ASIN 的基础信息（不包含历史快照）。","operationId":"getOne","parameters":[{"name":"id","in":"path","description":"要查询的 ASIN 的唯一 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"成功获取 ASIN","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinResponse"}}}},"404":{"description":"未找到指定 ID 的 ASIN","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinResponse"}}}}}},"delete":{"tags":["ASIN 管理"],"summary":"删除一个 ASIN","description":"根据提供的主键 ID 删除一个 ASIN 及其相关的监控任务。","operationId":"delete","parameters":[{"name":"id","in":"path","description":"要删除的 ASIN 的唯一 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"204":{"description":"删除成功"},"404":{"description":"未找到指定 ID 的 ASIN"}}}},"/api/asin/{id}/reviews":{"get":{"tags":["ReviewQuery"],"summary":"查询指定 ASIN 的评论记录","description":"当 rating=negative 时，仅返回 1-3 星差评。","operationId":"list_2","parameters":[{"name":"id","in":"path","description":"ASIN 主键 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"rating","in":"query","description":"过滤参数：negative (仅返回 1-3 星)","required":false,"schema":{"type":"string"},"example":"negative"},{"name":"page","in":"query","description":"页码 (从0开始)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"每页条数 (最大200)","required":false,"schema":{"maximum":200,"type":"integer","format":"int32","default":50},"example":50}],"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReviewAlertResponse"}}}}}}}},"/api/asin/{id}/history":{"get":{"tags":["ASIN 数据查询"],"summary":"查询指定 ASIN 的抓取历史","description":"支持通过开始/结束时间过滤，时间格式为 ISO-8601。","operationId":"history","parameters":[{"name":"id","in":"path","description":"要查询的 ASIN 的唯一 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"range","in":"query","description":"查询的时间范围，例如 '7d' (7天), '30d' (30天), '3m' (3个月)。默认为 30 天。","required":false,"schema":{"type":"string","default":"30d"},"example":"30d"},{"name":"page","in":"query","description":"页码 (从0开始)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"每页条数 (最大200)","required":false,"schema":{"maximum":200,"type":"integer","format":"int32","default":200},"example":200}],"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AsinHistoryResponse"}}}}},"400":{"description":"时间格式错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PageResponseAsinHistoryResponse"}}}}}}},"/api/asin/{id}/alerts":{"get":{"tags":["AsinAlertQuery"],"summary":"分页查询指定 ASIN 的告警","description":"支持按类型、时间范围过滤。","operationId":"list_3","parameters":[{"name":"id","in":"path","description":"ASIN 主键 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"page","in":"query","description":"页码 (从0开始)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"每页条数 (最大200)","required":false,"schema":{"maximum":200,"type":"integer","format":"int32","default":50},"example":50},{"name":"type","in":"query","description":"告警类型过滤","required":false,"schema":{"type":"string"},"example":"PRICE_CHANGE"},{"name":"from","in":"query","description":"开始时间 ISO-8601","required":false,"schema":{"type":"string"},"example":"2025-10-01T00:00:00Z"},{"name":"to","in":"query","description":"结束时间 ISO-8601","required":false,"schema":{"type":"string"},"example":"2025-11-01T23:59:59Z"}],"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AlertLogResponse"}}}}}}}},"/api/asin/by-asin/{asin}":{"get":{"tags":["ASIN 管理"],"summary":"根据 ASIN 编码获取该 ASIN 的最近一次历史快照","description":"返回与 asin 关联的最新一条历史快照（价格、BSR、库存等）。","operationId":"getByAsinCode","parameters":[{"name":"asin","in":"path","description":"要查询的 ASIN 编码（例如 B08XXXXX）","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"成功获取最新历史快照","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinHistoryResponse"}}}},"404":{"description":"未找到指定 ASIN 或无历史快照","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsinHistoryResponse"}}}}}}},"/api/alerts":{"get":{"tags":["AlertQuery"],"summary":"获取最新告警日志","description":"按告警时间降序，限制返回条数。","operationId":"latest","parameters":[{"name":"page","in":"query","description":"页码 (从0开始)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"每页条数 (最大200)","required":false,"schema":{"maximum":200,"type":"integer","format":"int32","default":50},"example":50},{"name":"type","in":"query","description":"告警类型过滤","required":false,"schema":{"type":"string"},"example":"PRICE_CHANGE"},{"name":"status","in":"query","description":"告警状态过滤（预留，当前忽略）","required":false,"schema":{"type":"string"},"example":"NEW"}],"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AlertLogResponse"}}}}}}}}},"components":{"schemas":{"AsinKeywordDto":{"required":["isTracked","keyword"],"type":"object","properties":{"id":{"type":"integer","description":"关键词记录的唯一ID","format":"int64","readOnly":true,"example":101},"keyword":{"type":"string","description":"要监控的关键词","example":"ergonomic office chair"},"isTracked":{"type":"boolean","description":"是否开启排名追踪","example":true},"asin":{"type":"string","description":"所属ASIN","readOnly":true,"example":"B08N5WRWNW"}},"description":"ASIN 关键词的数据传输对象"},"AsinResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ASIN 记录主键 ID","format":"int64"},"asin":{"type":"string","description":"Amazon 标准识别号"},"site":{"type":"string","description":"站点代码，例如 US / UK"},"nickname":{"type":"string","description":"自定义昵称","nullable":true},"inventoryThreshold":{"type":"integer","description":"库存预警阈值","format":"int32","nullable":true},"brand":{"type":"string","description":"品牌","nullable":true},"groupId":{"type":"integer","description":"分组ID","format":"int64","nullable":true},"groupName":{"type":"string","description":"分组名称","nullable":true},"createdAt":{"type":"string","description":"创建时间 (UTC ISO-8601)","format":"date-time"},"updatedAt":{"type":"string","description":"更新时间 (UTC ISO-8601)","format":"date-time"},"latestSnapshotAt":{"type":"string","description":"最新一次抓取的时间点 (UTC ISO-8601)","format":"date-time","nullable":true},"latestPrice":{"type":"string","description":"最新一次抓取的价格","nullable":true},"latestBsr":{"type":"string","description":"最新一次抓取的 BSR 排名","nullable":true},"latestInventory":{"type":"integer","description":"最新一次抓取的库存数量（若可用）","format":"int32","nullable":true},"latestAvgRating":{"type":"number","description":"最新一次抓取的平均评分","format":"double","nullable":true},"latestTotalReviews":{"type":"integer","description":"最新一次抓取的总评论数","format":"int32","nullable":true},"latestImageMd5":{"type":"string","description":"最新一次抓取的主图 MD5","nullable":true},"latestAplusMd5":{"type":"string","description":"最新一次抓取的 A+ 内容 MD5","nullable":true},"latestNegativeReviewMd5":{"type":"string","description":"最新一次抓取的最新差评 MD5（用于对比）","nullable":true}},"description":"ASIN 基础信息响应 DTO"},"AsinRequest":{"required":["asin","inventoryThreshold","site"],"type":"object","properties":{"asin":{"type":"string","description":"Amazon 标准识别号","example":"B0TEST1234"},"site":{"type":"string","description":"站点代码","example":"US"},"nickname":{"type":"string","description":"自定义昵称","nullable":true},"inventoryThreshold":{"type":"integer","description":"库存预警阈值","format":"int32","example":20},"brand":{"type":"string","description":"品牌","nullable":true},"groupId":{"type":"integer","description":"分组ID","format":"int64","nullable":true}},"description":"ASIN 创建/更新请求 DTO"},"KeywordRankResponse":{"type":"object","properties":{"keywordId":{"type":"integer","description":"关键词记录的唯一ID","format":"int64","example":101},"asin":{"type":"string","description":"ASIN 编码","example":"B08N5WRWNW"},"keyword":{"type":"string","description":"触发抓取的关键词","example":"ergonomic office chair"},"naturalRank":{"type":"integer","description":"自然排名，未找到时为 -1","format":"int32","example":12},"sponsoredRank":{"type":"integer","description":"广告排名，未找到时为 -1","format":"int32","example":5},"page":{"type":"integer","description":"排名所在页码，未找到时为 -1","format":"int32","example":1},"scrapeDate":{"type":"string","description":"抓取日期","format":"date"},"success":{"type":"boolean","description":"本次触发是否成功"},"message":{"type":"string","description":"附加说明，例如失败原因"}},"description":"关键词排名抓取结果"},"AsinCostsDto":{"required":["purchaseCost"],"type":"object","properties":{"asin":{"type":"string","description":"亚马逊标准识别码","readOnly":true,"example":"B08N5WRWNW"},"purchaseCost":{"type":"number","description":"采购成本","example":15.5},"shippingCost":{"type":"number","description":"头程运费","example":3.2},"fbaFee":{"type":"number","description":"FBA派送费","example":5.8},"tariffRate":{"type":"number","description":"关税税率（例如 0.06 表示 6%）","example":0.06},"otherCost":{"type":"number","description":"其他杂项成本","example":0.5}},"description":"ASIN 成本配置的数据传输对象"},"AsinGroupModel":{"type":"object","properties":{"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"description":{"type":"string"},"asinCount":{"type":"integer","format":"int32"}}},"KeywordRankHistoryDto":{"type":"object","properties":{"id":{"type":"integer","description":"记录ID","format":"int64","example":1},"scrapeDate":{"type":"string","description":"抓取日期","format":"date"},"naturalRank":{"type":"integer","description":"自然排名，未找到时为 -1","format":"int32","example":12},"sponsoredRank":{"type":"integer","description":"广告排名，未找到时为 -1","format":"int32","example":5},"page":{"type":"integer","description":"排名所在页码，未找到时为 -1","format":"int32","example":1}},"description":"关键词排名历史记录"},"ProfitCalculationResponse":{"type":"object","properties":{"profit":{"type":"number","description":"计算得到的利润金额","example":12.34},"profitMargin":{"type":"number","description":"利润率（0-1 之间的小数）","example":0.2456},"message":{"type":"string","description":"状态描述，例如计算成功或错误原因","example":"计算成功"}},"description":"利润计算返回结果"},"PageResponseAsinGroupModel":{"type":"object","properties":{"items":{"type":"array","description":"当前页数据列表","items":{"$ref":"#/components/schemas/AsinGroupModel"}},"total":{"type":"integer","description":"总记录数","format":"int64"},"page":{"type":"integer","description":"当前页码 (从0开始)","format":"int32"},"size":{"type":"integer","description":"每页大小","format":"int32"},"totalPages":{"type":"integer","description":"总页数","format":"int32"},"hasNext":{"type":"boolean","description":"是否存在下一页"},"hasPrevious":{"type":"boolean","description":"是否存在上一页"}},"description":"统一分页响应结构"},"PageResponseAsinResponse":{"type":"object","properties":{"items":{"type":"array","description":"当前页数据列表","items":{"$ref":"#/components/schemas/AsinResponse"}},"total":{"type":"integer","description":"总记录数","format":"int64"},"page":{"type":"integer","description":"当前页码 (从0开始)","format":"int32"},"size":{"type":"integer","description":"每页大小","format":"int32"},"totalPages":{"type":"integer","description":"总页数","format":"int32"},"hasNext":{"type":"boolean","description":"是否存在下一页"},"hasPrevious":{"type":"boolean","description":"是否存在上一页"}},"description":"统一分页响应结构"},"ReviewAlertResponse":{"type":"object","properties":{"id":{"type":"integer","description":"评论记录主键 ID","format":"int64"},"asinId":{"type":"integer","description":"关联 ASIN 主键 ID","format":"int64"},"reviewId":{"type":"string","description":"评论唯一 ID","nullable":true},"rating":{"type":"integer","description":"评分 (1-5)","format":"int32","nullable":true},"reviewDate":{"type":"string","description":"评论日期","format":"date","nullable":true},"reviewText":{"type":"string","description":"评论正文","nullable":true},"alertAt":{"type":"string","description":"告警生成时间 (UTC ISO-8601)","format":"date-time"}},"description":"差评 / 评论记录响应 DTO"},"AsinHistoryResponse":{"type":"object","properties":{"id":{"type":"integer","description":"快照主键 ID","format":"int64"},"asinId":{"type":"integer","description":"关联的 ASIN 主键 ID","format":"int64"},"title":{"type":"string","description":"商品标题","nullable":true},"price":{"type":"number","description":"Buybox 价格","nullable":true},"bsr":{"type":"integer","description":"BSR 主排名","format":"int32","nullable":true},"bsrCategory":{"type":"string","description":"BSR 主分类","nullable":true},"bsrSubcategory":{"type":"string","description":"BSR 子分类","nullable":true},"bsrSubcategoryRank":{"type":"integer","description":"BSR 子分类排名","format":"int32","nullable":true},"inventory":{"type":"integer","description":"估算库存","format":"int32","nullable":true},"inventoryLimited":{"type":"boolean","description":"是否命中限购","nullable":true},"bulletPoints":{"type":"string","description":"要点（拼接文本）","nullable":true},"imageMd5":{"type":"string","description":"主图 MD5","nullable":true},"aplusMd5":{"type":"string","description":"A+ 内容 MD5","nullable":true},"totalReviews":{"type":"integer","description":"总评论数","format":"int32","nullable":true},"avgRating":{"type":"number","description":"平均评分","nullable":true},"snapshotAt":{"type":"string","description":"快照时间 (UTC ISO-8601)","format":"date-time"},"couponValue":{"type":"string","description":"优惠券面额，例如 '$10 off' 或 '5%'","nullable":true},"isLightningDeal":{"type":"boolean","description":"是否处于秒杀活动","nullable":true}},"description":"ASIN 历史快照响应 DTO"},"PageResponseAsinHistoryResponse":{"type":"object","properties":{"items":{"type":"array","description":"当前页数据列表","items":{"$ref":"#/components/schemas/AsinHistoryResponse"}},"total":{"type":"integer","description":"总记录数","format":"int64"},"page":{"type":"integer","description":"当前页码 (从0开始)","format":"int32"},"size":{"type":"integer","description":"每页大小","format":"int32"},"totalPages":{"type":"integer","description":"总页数","format":"int32"},"hasNext":{"type":"boolean","description":"是否存在下一页"},"hasPrevious":{"type":"boolean","description":"是否存在上一页"}},"description":"统一分页响应结构"},"AlertLogResponse":{"type":"object","properties":{"id":{"type":"integer","description":"告警主键 ID","format":"int64"},"asinId":{"type":"integer","description":"ASIN 记录主键","format":"int64"},"asinCode":{"type":"string","description":"ASIN 代码"},"site":{"type":"string","description":"站点"},"alertType":{"type":"string","description":"告警类型，例如 PRICE_CHANGE / INVENTORY_THRESHOLD / REVIEW_NEGATIVE"},"severity":{"type":"string","description":"严重级别，默认 INFO"},"alertAt":{"type":"string","description":"触发时间戳","format":"date-time"},"oldValue":{"type":"string","description":"旧值（必要时）","nullable":true},"newValue":{"type":"string","description":"新值（必要时）","nullable":true},"changePercent":{"type":"number","description":"变更百分比数值，正数=上涨，负数=下降，单位为百分比，例如 -25.00 表示下降25%","nullable":true},"refId":{"type":"integer","description":"引用的关联记录ID，例如 ReviewAlert 的 ID","format":"int64","nullable":true},"contextJson":{"type":"string","description":"上下文 JSON 原始字符串","nullable":true},"message":{"type":"string","description":"格式化消息","nullable":true}},"description":"告警日志响应 DTO"}}}}